# PostgreSQL TLS Test - Host-Based Authentication
# This config requires SSL for all TCP/IP connections
#
# TYPE  DATABASE  USER  ADDRESS   METHOD

# Allow local connections (needed for init scripts and pg_isready)
local   all       all             trust

# Require SSL for all TCP/IP connections
hostssl all       all   0.0.0.0/0 scram-sha-256
hostssl all       all   ::/0      scram-sha-256

# Reject non-SSL TCP/IP connections
hostnossl all     all   0.0.0.0/0 reject
hostnossl all     all   ::/0      reject
